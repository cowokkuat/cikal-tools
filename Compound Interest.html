<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compounding FX Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 30px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }

        .input-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .input-box h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .input-box label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(255,255,255,0.5);
            color: #666;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255,255,255,0.8);
        }

        input[type="number"], select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s;
        }

        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            margin-bottom: 10px;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .percent-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .percent-input-group input {
            flex: 1;
        }

        .percent-input-group span {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: #888;
            margin-top: 5px;
        }

        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .result-card h2 {
            color: white;
            border-color: white;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-box {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .summary-box p:first-child {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .summary-box p:last-child {
            font-size: 1.8em;
            font-weight: bold;
        }

        .main-result {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
        }

        .main-result h3 {
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .main-result .amount {
            font-size: 3.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .main-result .conversion {
            font-size: 1.5em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .profit-box {
            background: rgba(255,255,255,0.25);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .chart-container h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            border: 1px solid #ddd;
            font-size: 1.1em;
        }

        table td {
            padding: 15px;
            border: 1px solid #ddd;
            font-size: 1.05em;
        }

        table tr:nth-child(even) {
            background: #f9f9f9;
        }

        table tr:hover {
            background: #f0f0f0;
        }

        .empty-state {
            background: rgba(255,255,255,0.9);
            padding: 60px 30px;
            border-radius: 20px;
            text-align: center;
            color: #666;
            font-size: 1.3em;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0.9;
        }

        .kurs-note {
            font-size: 0.85em;
            color: #666;
            margin-top: 8px;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            .main-result .amount {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ðŸ’° COMPOUNDING FX CALCULATOR</h1>
            <p>Hitung Pertumbuhan Modal dengan Compound Interest</p>
        </div>

        <!-- Input Section -->
        <div class="card">
            <h2>ðŸ“Š INPUT DATA</h2>

            <div class="input-grid">
                <!-- Modal Awal -->
                <div class="input-box">
                    <h3>1. MODAL AWAL</h3>
                    
                    <label>Pilih Mata Uang:</label>
                    <div class="tabs">
                        <button class="tab-btn active" id="btnUSD" onclick="setCurrency('USD')">USD</button>
                        <button class="tab-btn" id="btnIDR" onclick="setCurrency('IDR')">IDR</button>
                        <button class="tab-btn" id="btnCENT" onclick="setCurrency('CENT')">CENT</button>
                    </div>

                    <label>Jumlah Modal:</label>
                    <input type="number" id="modalAwal" placeholder="Masukkan jumlah modal" oninput="calculate()">
                </div>

                <!-- Jangka Waktu -->
                <div class="input-box">
                    <h3>2. JANGKA WAKTU</h3>
                    
                    <label>Pilih Durasi:</label>
                    <select id="durasi" onchange="calculate()">
                        <option value="20">1 Bulan (20 hari)</option>
                        <option value="40">2 Bulan (40 hari)</option>
                        <option value="60">3 Bulan (60 hari)</option>
                        <option value="80">4 Bulan (80 hari)</option>
                        <option value="100">5 Bulan (100 hari)</option>
                        <option value="120">6 Bulan (120 hari)</option>
                        <option value="140">7 Bulan (140 hari)</option>
                        <option value="160">8 Bulan (160 hari)</option>
                        <option value="180">9 Bulan (180 hari)</option>
                        <option value="200">10 Bulan (200 hari)</option>
                        <option value="220">11 Bulan (220 hari)</option>
                        <option value="240">12 Bulan (240 hari)</option>
                    </select>
                </div>

                <!-- Persentase Profit -->
                <div class="input-box">
                    <h3>3. PROFIT HARIAN</h3>
                    
                    <label>Persentase (%):</label>
                    <input type="range" id="percentSlider" min="0" max="100" step="0.1" value="2" 
                        oninput="updatePercent(this.value); calculate()">
                    
                    <div class="percent-input-group">
                        <input type="number" id="percentInput" step="0.1" value="2" 
                            oninput="updatePercentFromInput(this.value); calculate()">
                        <span>%</span>
                    </div>
                    
                    <div class="range-labels">
                        <span>0%</span>
                        <span>100%</span>
                    </div>
                </div>

                <!-- Kurs Konversi -->
                <div class="input-box">
                    <h3>4. KURS (Opsional)</h3>
                    
                    <label>1 USD = Rp</label>
                    <input type="number" id="kursUSD" placeholder="Contoh: 15500" oninput="calculate()">
                    <p class="kurs-note">* Untuk konversi ke IDR</p>
                    <p class="kurs-note">** 100 CENT = 1 USD</p>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsContainer" style="display: none;">
            <div class="result-card">
                <h2>ðŸŽ¯ HASIL PERHITUNGAN</h2>

                <!-- Summary Cards -->
                <div class="summary-grid">
                    <div class="summary-box">
                        <p>Modal Awal</p>
                        <p id="summaryModal">-</p>
                    </div>
                    <div class="summary-box">
                        <p>Durasi</p>
                        <p id="summaryDurasi">-</p>
                    </div>
                    <div class="summary-box">
                        <p>Profit/Hari</p>
                        <p id="summaryProfit">-</p>
                    </div>
                </div>

                <!-- Main Result -->
                <div class="main-result">
                    <h3>ðŸ’Ž MODAL AKHIR</h3>
                    <div class="amount" id="modalAkhir">-</div>
                    <div class="conversion" id="konversiIDR"></div>
                    <div class="profit-box" id="profitInfo">-</div>
                </div>

                <!-- Monthly Table -->
                <div class="chart-container" style="margin-bottom: 20px;">
                    <h3>ðŸ“Š RINCIAN PER BULAN</h3>
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 30%;">Bulan</th>
                                <th style="text-align: right;">Profit</th>
                            </tr>
                        </thead>
                        <tbody id="monthlyTableBody">
                            <!-- Generated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Chart -->
                <div class="chart-container">
                    <h3>ðŸ“ˆ GRAFIK PERTUMBUHAN MODAL</h3>
                    <canvas id="growthChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state">
            <p>ðŸ‘† Lengkapi data di atas untuk melihat hasil perhitungan</p>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>ðŸ’¡ Calculator berbasis rumus compound interest harian</p>
        </div>
    </div>

    <script>
        let currentCurrency = 'USD';
        let growthChart = null;

        function setCurrency(currency) {
            currentCurrency = currency;
            
            ['USD', 'IDR', 'CENT'].forEach(c => {
                const btn = document.getElementById(`btn${c}`);
                if (c === currency) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            calculate();
        }

        function updatePercent(value) {
            document.getElementById('percentInput').value = value;
        }

        function updatePercentFromInput(value) {
            document.getElementById('percentSlider').value = value;
        }

        function formatNumber(num, currency) {
            const rounded = Math.round(num);
            const formatted = rounded.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
            
            if (currency === 'USD') {
                return `$${formatted}`;
            } else if (currency === 'IDR') {
                return `Rp ${formatted}`;
            } else if (currency === 'CENT') {
                return `${formatted} CENT`;
            }
            return formatted;
        }

        function calculate() {
            const modalAwal = parseFloat(document.getElementById('modalAwal').value);
            const durasi = parseInt(document.getElementById('durasi').value);
            const percent = parseFloat(document.getElementById('percentInput').value);
            const kursUSD = parseFloat(document.getElementById('kursUSD').value);

            if (!modalAwal || !percent) {
                document.getElementById('resultsContainer').style.display = 'none';
                document.getElementById('emptyState').style.display = 'block';
                return;
            }

            let modalInUSD = modalAwal;
            if (currentCurrency === 'CENT') {
                modalInUSD = modalAwal / 100;
            } else if (currentCurrency === 'IDR' && kursUSD) {
                modalInUSD = modalAwal / kursUSD;
            }

            const rate = percent / 100;
            const modalAkhirUSD = modalInUSD * Math.pow(1 + rate, durasi);
            
            const profitUSD = modalAkhirUSD - modalInUSD;
            const profitPercent = (profitUSD / modalInUSD) * 100;

            updateSummary(modalAwal, durasi, percent);
            displayMainResult(modalAkhirUSD, profitUSD, profitPercent, kursUSD);
            
            const chartData = generateChartData(modalInUSD, rate, durasi);
            updateChart(chartData, durasi);
            
            generateMonthlyTable(modalInUSD, rate, durasi, kursUSD, modalAwal);

            document.getElementById('resultsContainer').style.display = 'block';
            document.getElementById('emptyState').style.display = 'none';
        }

        function updateSummary(modal, durasi, percent) {
            let currencySymbol = currentCurrency;
            if (currentCurrency === 'IDR') currencySymbol = 'Rp';
            
            const formatted = modal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
            document.getElementById('summaryModal').textContent = `${formatted} ${currencySymbol}`;
            document.getElementById('summaryDurasi').textContent = `${durasi} hari`;
            document.getElementById('summaryProfit').textContent = `${percent}%`;
        }

        function displayMainResult(modalAkhirUSD, profitUSD, profitPercent, kursUSD) {
            let displayText = '';
            let konversiText = '';

            if (currentCurrency === 'USD') {
                displayText = formatNumber(modalAkhirUSD, 'USD');
                if (kursUSD) {
                    const idrValue = modalAkhirUSD * kursUSD;
                    konversiText = `= ${formatNumber(idrValue, 'IDR')}`;
                }
            } else if (currentCurrency === 'CENT') {
                const centValue = modalAkhirUSD * 100;
                displayText = formatNumber(centValue, 'CENT');
                if (kursUSD) {
                    const idrValue = modalAkhirUSD * kursUSD;
                    konversiText = `= ${formatNumber(modalAkhirUSD, 'USD')} = ${formatNumber(idrValue, 'IDR')}`;
                } else {
                    konversiText = `= ${formatNumber(modalAkhirUSD, 'USD')}`;
                }
            } else if (currentCurrency === 'IDR') {
                const modalAwal = parseFloat(document.getElementById('modalAwal').value);
                const rate = parseFloat(document.getElementById('percentInput').value) / 100;
                const durasi = parseInt(document.getElementById('durasi').value);
                const modalAkhirIDR = modalAwal * Math.pow(1 + rate, durasi);
                displayText = formatNumber(modalAkhirIDR, 'IDR');
            }

            document.getElementById('modalAkhir').textContent = displayText;
            document.getElementById('konversiIDR').textContent = konversiText;

            let profitDisplay = '';
            if (currentCurrency === 'USD') {
                profitDisplay = `âœ¨ Profit: +${formatNumber(profitUSD, 'USD')} (+${profitPercent.toFixed(2)}%)`;
            } else if (currentCurrency === 'CENT') {
                profitDisplay = `âœ¨ Profit: +${formatNumber(profitUSD * 100, 'CENT')} (+${profitPercent.toFixed(2)}%)`;
            } else {
                const modalAwal = parseFloat(document.getElementById('modalAwal').value);
                const rate = parseFloat(document.getElementById('percentInput').value) / 100;
                const durasi = parseInt(document.getElementById('durasi').value);
                const modalAkhirIDR = modalAwal * Math.pow(1 + rate, durasi);
                const profitIDR = modalAkhirIDR - modalAwal;
                profitDisplay = `âœ¨ Profit: +${formatNumber(profitIDR, 'IDR')} (+${profitPercent.toFixed(2)}%)`;
            }
            
            document.getElementById('profitInfo').textContent = profitDisplay;
        }

        function generateChartData(modalAwal, rate, durasi) {
            const data = [];
            for (let day = 0; day <= durasi; day++) {
                const value = modalAwal * Math.pow(1 + rate, day);
                data.push({day: day, value: value});
            }
            return data;
        }

        function generateMonthlyTable(modalAwalUSD, rate, durasi, kursUSD, modalAwalOriginal) {
            const tbody = document.getElementById('monthlyTableBody');
            tbody.innerHTML = '';
            
            const numMonths = Math.ceil(durasi / 20);
            
            for (let month = 1; month <= numMonths; month++) {
                const days = month * 20;
                if (days > durasi) break;
                
                const modalUSD = modalAwalUSD * Math.pow(1 + rate, days);
                const profitUSD = modalUSD - modalAwalUSD;
                
                let profitDisplay = '';
                
                if (currentCurrency === 'USD') {
                    profitDisplay = `+${formatNumber(profitUSD, 'USD')}`;
                    if (kursUSD) {
                        const profitIDR = profitUSD * kursUSD;
                        profitDisplay += ` (${formatNumber(profitIDR, 'IDR')})`;
                    }
                } else if (currentCurrency === 'CENT') {
                    const profitCENT = profitUSD * 100;
                    profitDisplay = `+${formatNumber(profitCENT, 'CENT')}`;
                    if (kursUSD) {
                        const profitIDR = profitUSD * kursUSD;
                        profitDisplay += ` (${formatNumber(profitIDR, 'IDR')})`;
                    }
                } else if (currentCurrency === 'IDR') {
                    const modalIDR = modalAwalOriginal * Math.pow(1 + rate, days);
                    const profitIDR = modalIDR - modalAwalOriginal;
                    profitDisplay = `+${formatNumber(profitIDR, 'IDR')}`;
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="font-weight: bold; color: #667eea;">Bulan ${month}</td>
                    <td style="text-align: right; color: #22c55e; font-weight: bold;">${profitDisplay}</td>
                `;
                tbody.appendChild(row);
            }
        }

        function updateChart(data, durasi) {
            const ctx = document.getElementById('growthChart').getContext('2d');
            
            if (growthChart) {
                growthChart.destroy();
            }

            let yAxisLabel = 'Modal';
            let currencySymbol = '';
            
            if (currentCurrency === 'USD') {
                currencySymbol = '$';
            } else if (currentCurrency === 'IDR') {
                currencySymbol = 'Rp ';
            } else if (currentCurrency === 'CENT') {
                currencySymbol = '';
                yAxisLabel = 'Modal (CENT)';
            }

            growthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => {
                        if (d.day === 0) return 'Awal';
                        if (d.day === durasi) return `Hari ${d.day}`;
                        if (d.day % 20 === 0) return `${d.day}h`;
                        return '';
                    }),
                    datasets: [{
                        label: yAxisLabel,
                        data: data.map(d => d.value),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: data.map(d => d.day % 20 === 0 ? 4 : 0),
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: '#764ba2',
                        pointHoverBorderColor: '#fff',
                        pointHoverBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                title: function(context) {
                                    return `Hari ke-${context[0].label}`;
                                },
                                label: function(context) {
                                    const value = context.parsed.y;
                                    let displayValue = '';
                                    if (currentCurrency === 'CENT') {
                                        displayValue = formatNumber(value, 'CENT');
                                    } else {
                                        displayValue = formatNumber(value, currentCurrency);
                                    }
                                    return `Modal: ${displayValue}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                maxTicksLimit: 10
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    const rounded = Math.round(value);
                                    const formatted = rounded.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
                                    if (currentCurrency === 'CENT') {
                                        return `${formatted} CENT`;
                                    }
                                    return `${currencySymbol}${formatted}`;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>